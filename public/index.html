<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/icons/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="BioImage Model Zoo - A community-driven, open resource for sharing standardized AI models for bioimage analysis"
    />
    
    <!-- Cache busting meta tags -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="%PUBLIC_URL%/icons/apple-touch-icon.png" />
    
    <!-- Favicon Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="%PUBLIC_URL%/icons/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="%PUBLIC_URL%/icons/favicon-16x16.png" />
    
    <!-- Microsoft Tile -->
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="msapplication-config" content="%PUBLIC_URL%/icons/browserconfig.xml" />
    
    <!-- Safari Pinned Tab -->
    <link rel="mask-icon" href="%PUBLIC_URL%/icons/safari-pinned-tab.svg" color="#5bbad5" />
    
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    
    <title>BioImage.IO - Model Zoo</title>
    
    <!-- Force clear old service worker and cache -->
    <script src="%PUBLIC_URL%/sw-unregister.js"></script>
    <script>
      // Additional immediate cleanup and cache busting
      (function() {
        // Add cache-busting timestamp to prevent cached resources
        const timestamp = Date.now();
        const meta = document.createElement('meta');
        meta.setAttribute('http-equiv', 'Cache-Control');
        meta.setAttribute('content', 'no-cache, no-store, must-revalidate');
        document.head.appendChild(meta);
        
        const pragma = document.createElement('meta');
        pragma.setAttribute('http-equiv', 'Pragma');
        pragma.setAttribute('content', 'no-cache');
        document.head.appendChild(pragma);
        
        const expires = document.createElement('meta');
        expires.setAttribute('http-equiv', 'Expires');
        expires.setAttribute('content', '0');
        document.head.appendChild(expires);
        
        // Force reload once if we detect old cached content
        const hasReloaded = sessionStorage.getItem('bioimage_forced_reload');
        if (!hasReloaded && 'caches' in window) {
          caches.keys().then(function(cacheNames) {
            const hasOldCache = cacheNames.some(name => 
              name.includes('kaibu') || 
              name.includes('workbox') || 
              name.includes('precache') ||
              name.includes('vue') ||
              name.includes('bioimage.io')
            );
            if (hasOldCache) {
              sessionStorage.setItem('bioimage_forced_reload', 'true');
              console.log('BioImage.IO: Detected old cache, forcing reload...');
              window.location.reload(true);
            }
          });
        }
      })();
    </script>
    
    <!-- Matomo -->
    <script>
      var _paq = window._paq = window._paq || [];
      /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function() {
        var u="https://bioimage.matomo.cloud/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '1']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.async=true; g.src='https://cdn.matomo.cloud/bioimage.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
      })();
    </script>
    <!-- End Matomo Code -->
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
  </body>
</html>
